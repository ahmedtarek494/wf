<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Add Grades</title>
	<meta name="author" content="Riccardo Massera"></meta>


<script type="text/javascript">




function showDataContaner(data){
			console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa: " + JSON.stringify(data));
			var ajaxloader = document.getElementById("ajaxloader");
			if (data.status == 'begin'){
				console.log('begin');
//				console.log($(	savebutton.style.display);
				
				ajaxloader.style.display= 'inline-block';
				
			}else if (data.status == 'complete'){
				ajaxloader.style.display = 'none';
				console.log('complete');
				
				
			
			}
			 else{
				
				console.log("else data.status : " + data.status );
			}
		}



</script>
</h:head>
<h:body style="padding-top: 60px">

	<!-- Comman navbar layout -->
	<ui:insert>
		<ui:include src="commanNavBarLayout.xhtml"></ui:include>
	</ui:insert>
	<b:container fluid="true">
		<b:row>


			<!-- admin sidebar layout -->
			<ui:insert>
				<ui:include src="adminSideBarLayout.xhtml"></ui:include>
			</ui:insert>
			
			
			<!-- content -->
			<b:column col-sm="9" offset-sm="3" col-md="10" offset="2" styleClass="main">
			<h1>Add Grades For Students</h1>
            <hr/>
			
			<!-- two equal column -->
<h:form id="form">        


                 
	              <b:row styleClass="show-grid" style="display: inline;">
                <b:selectOneMenu value="#{addingGradesView.centerid}" id="center" label="Choose Center :">
           
            <f:selectItem 
                itemValue="1" itemLabel="Basmala October" />
                <f:selectItem 
                itemValue="2" itemLabel="Basmala Dokki" />
                <f:selectItem 
                itemValue="3" itemLabel="College" />
                <f:selectItem 
                itemValue="4" itemLabel="MBC" />
                <f:selectItem 
                itemValue="5" itemLabel="Basmala Haram" />
        </b:selectOneMenu>

             
                 <b:selectOneMenu value="#{addingGradesView.assessmentid}" id="assessmenttype" label="Choose the Assessment">
           
            <f:selectItems value="#{addingGradesView.assessmentdto}" var="item"
                itemValue="#{item.id}" itemLabel="#{item.assessmentNameDto}" />
        </b:selectOneMenu>
                    
                    
                       <h:commandButton styleClass="btn btn-primary" id="search" type="submit" value="Search" style="width:17%">
                  <f:ajax  onevent="showDataContaner" event="click"  listener="#{addingGradesView.AjaxStudentGrades()}" execute="center assessmenttype"  render="table" /> 
                    </h:commandButton>
                    
                    <h:commandButton styleClass="btn btn-primary" id="edit" type="submit" value="edit" style="width:17%">
                  <f:ajax  onevent="showDataContaner" event="click"  listener="#{addingGradesView.changeGradeStatus()}" execute="center assessmenttype"  render="table" /> 
                    </h:commandButton>
            </b:row>
       
       

       
           <img id="ajaxloader"  src="131.gif" style="display: none;"/>
            
                
                                
            
                            
           
                           
                       
            <b:row styleClass="table-responsive">
                        <b:dataTable id="table"  styleClass="table table-striped" value="#{addingGradesView.gradesdto}" var="item" >
                            <h:column>
                                <f:facet name="header"><h:outputText value="ID" /></f:facet>
                                <h:outputText value="#{item.userid.id}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header"><h:outputText value="Name" /></f:facet>
                                <h:outputText value="#{item.userid.name}" />
                                
                            </h:column>
                            <h:column>
                                <f:facet name="header"><h:outputText value="Center" /></f:facet>
                                <h:outputText value="#{item.userid.center.centername}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header"><h:outputText value="Assessment" /></f:facet>
                                <h:outputText value="#{item.assessmenttype.assessmentNameDto}" />
                            </h:column>
                             <h:column>
                                <f:facet name="header"><h:outputText value="Student Grade" /></f:facet>
                             <h:outputText value="#{item.usergrade}"  rendered="#{!addingGradesView.gradestatus}" />
                                <h:inputText value="#{item.usergrade}"  rendered="#{addingGradesView.gradestatus}" />
                            </h:column>
                            
                               <h:column>
                                <f:facet name="header"><h:outputText value="Assessment Grade" /></f:facet>
                                <h:outputText value="#{item.assessmenttype.gradeFromDto}" />
                            </h:column>
                             
                
                            
                        </b:dataTable>
                    </b:row>
                    
                      <h:commandButton   styleClass="btn btn-success" id="save" action="#{addingGradesView.updatestudentgrade()}"   type="submit" value="Save"   style="width:20%; ">
                    </h:commandButton>   
		



			</h:form>
			
	
			
			</b:column>
		</b:row>
	</b:container>
	
	
	
	<style>
	                    .show-grid [class^="col-"] {
                        background-color: rgba(86, 61, 124, 0.15);
                        border: 1px solid rgba(86, 61, 124, 0.2);
                        padding-bottom: 10px;
                        padding-top: 10px;
                        //margin-bottom: 15px;
                    }
	</style>
</h:body>
</html>